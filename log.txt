
C:\Users\Sys\Desktop\letsConnect>node app.js
App listening at http://9000
in homepage get()
not logged in
redirected to login
query username:ajay
loggd in user 5ae6db53ef8f370830a7064a
in homepage get()
redirected to homepage
search result : { friends: [],
  friendreq: [],
  posts: [],
  _id: 5ae6db53ef8f370830a7064a,
  username: 'ajay',
  email: 'ajay@gmail.com',
  password: '$2a$10$g6TzdxDG2DeSEIcxjq7t.ubk5LLPOF.SSoFLjr2aLhiA40ycIBYHy',
  __v: 0 },{ friends: [],
  friendreq: [ 5ae6db53ef8f370830a7064a ],
  posts: [],
  _id: 5ae6db61ef8f370830a7064b,
  username: 'ajay2',
  email: 'ajay2@gmail.com',
  password: '$2a$10$vB47c1smeEPDLpAG.ghF0OkYNA3Cky7nAhoiZxPejAQ8Diq4rlpiy',
  __v: 0 },{ friends: [],
  friendreq: [ 5ae6db53ef8f370830a7064a ],
  posts: [],
  _id: 5ae6db70ef8f370830a7064c,
  username: 'ajay3',
  email: 'ajay3@gmail.com',
  password: '$2a$10$HDhZytyV7Mw531KGdKqS5.WfhL0FMnlgxK1uOsxrf/UQzRYeuPqvO',
  __v: 0 },{ friends: [],
  friendreq: [ 5ae6db53ef8f370830a7064a ],
  posts: [],
  _id: 5ae6db81ef8f370830a7064d,
  username: 'ajay4',
  email: 'ajay4@gmail.com',
  password: '$2a$10$Nmw9u4aan8UeZEedYvasw.aoK6lGQMoaUO2MHs88UOu0Baw7TQ2JC',
  __v: 0 },{ friends: [],
  friendreq: [],
  posts: [],
  _id: 5ae6db95ef8f370830a7064e,
  username: 'ajay5',
  email: 'ajay5@gmail.com',
  password: '$2a$10$52KhTe3gemf3cs3UIdzF.Orex0WnYB/EjOkDmmP411zi7e72JCI82',
  __v: 0 }
check:true
in callback :1
in sendrequest GET
to user:{"email":"ajay5@gmail.com"}
current user:5ae6db53ef8f370830a7064a
search result : { friends: [],
  friendreq: [],
  posts: [],
  _id: 5ae6db95ef8f370830a7064e,
  username: 'ajay5',
  email: 'ajay5@gmail.com',
  password: '$2a$10$52KhTe3gemf3cs3UIdzF.Orex0WnYB/EjOkDmmP411zi7e72JCI82',
  __v: 0 }
typeof newArr object 5ae6db53ef8f370830a7064a
added new request:[{"friends":[],"friendreq":[],"posts":[],"_id":"5ae6db95ef8f370830a7064e","username":"ajay5","email":"ajay5@gmail.com","password":"$2a$10$52KhTe3gemf3cs3UIdzF.Orex0WnYB/EjOkDmmP411zi7e72JCI82","__v":0}]
updated doc:{ friends: [],
  friendreq: [],
  posts: [],
  _id: 5ae6db95ef8f370830a7064e,
  username: 'ajay5',
  email: 'ajay5@gmail.com',
  password: '$2a$10$52KhTe3gemf3cs3UIdzF.Orex0WnYB/EjOkDmmP411zi7e72JCI82',
  __v: 0 }
in sendrequest callback :{"status":200,"msg":"request sent"}
in logout
in homepage get()
not logged in
redirected to login
in logout
query username:ajay2
loggd in user 5ae6db61ef8f370830a7064b
in homepage get()
redirected to homepage
search result : { friends: [],
  friendreq: [],
  posts: [],
  _id: 5ae6db53ef8f370830a7064a,
  username: 'ajay',
  email: 'ajay@gmail.com',
  password: '$2a$10$g6TzdxDG2DeSEIcxjq7t.ubk5LLPOF.SSoFLjr2aLhiA40ycIBYHy',
  __v: 0 },{ friends: [],
  friendreq: [ 5ae6db53ef8f370830a7064a ],
  posts: [],
  _id: 5ae6db61ef8f370830a7064b,
  username: 'ajay2',
  email: 'ajay2@gmail.com',
  password: '$2a$10$vB47c1smeEPDLpAG.ghF0OkYNA3Cky7nAhoiZxPejAQ8Diq4rlpiy',
  __v: 0 },{ friends: [],
  friendreq: [ 5ae6db53ef8f370830a7064a ],
  posts: [],
  _id: 5ae6db70ef8f370830a7064c,
  username: 'ajay3',
  email: 'ajay3@gmail.com',
  password: '$2a$10$HDhZytyV7Mw531KGdKqS5.WfhL0FMnlgxK1uOsxrf/UQzRYeuPqvO',
  __v: 0 },{ friends: [],
  friendreq: [ 5ae6db53ef8f370830a7064a ],
  posts: [],
  _id: 5ae6db81ef8f370830a7064d,
  username: 'ajay4',
  email: 'ajay4@gmail.com',
  password: '$2a$10$Nmw9u4aan8UeZEedYvasw.aoK6lGQMoaUO2MHs88UOu0Baw7TQ2JC',
  __v: 0 },{ friends: [],
  friendreq: [ 5ae6db53ef8f370830a7064a ],
  posts: [],
  _id: 5ae6db95ef8f370830a7064e,
  username: 'ajay5',
  email: 'ajay5@gmail.com',
  password: '$2a$10$52KhTe3gemf3cs3UIdzF.Orex0WnYB/EjOkDmmP411zi7e72JCI82',
  __v: 0 }
check:true
check:true
check:true
check:true
in callback :4
in sendrequest GET
to user:{"email":"ajay3@gmail.com"}
current user:5ae6db61ef8f370830a7064b
search result : { friends: [],
  friendreq: [ 5ae6db53ef8f370830a7064a ],
  posts: [],
  _id: 5ae6db70ef8f370830a7064c,
  username: 'ajay3',
  email: 'ajay3@gmail.com',
  password: '$2a$10$HDhZytyV7Mw531KGdKqS5.WfhL0FMnlgxK1uOsxrf/UQzRYeuPqvO',
  __v: 0 }
typeof newArr object 5ae6db61ef8f370830a7064b
added new request:[{"friends":[],"friendreq":["5ae6db53ef8f370830a7064a"],"posts":[],"_id":"5ae6db70ef8f370830a7064c","username":"ajay3","email":"ajay3@gmail.com","password":"$2a$10$HDhZytyV7Mw531KGdKqS5.WfhL0FMnlgxK1uOsxrf/UQzRYeuPqvO","__v":0}]
updated doc:{ friends: [],
  friendreq: [ 5ae6db53ef8f370830a7064a ],
  posts: [],
  _id: 5ae6db70ef8f370830a7064c,
  username: 'ajay3',
  email: 'ajay3@gmail.com',
  password: '$2a$10$HDhZytyV7Mw531KGdKqS5.WfhL0FMnlgxK1uOsxrf/UQzRYeuPqvO',
  __v: 0 }
in sendrequest callback :{"status":200,"msg":"request sent"}
in logout
redirected to login
query username:fneq;ohq;
Error: Failed to serialize user into session
    at pass (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\authenticator.js:281:19)
    at serialized (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\authenticator.js:286:7)
    at C:\Users\Sys\Desktop\letsConnect\routes\users.js:85:3
    at pass (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\authenticator.js:294:9)
    at Authenticator.serializeUser (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\authenticator.js:299:5)
    at SessionManager.logIn (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\sessionmanager.js:14:8)
    at IncomingMessage.req.login.req.logIn (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\http\request.js:50:33)
    at C:\Users\Sys\Desktop\letsConnect\routes\users.js:105:9
    at allFailed (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\middleware\authenticate.js:107:18)
    at attempt (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\middleware\authenticate.js:180:28)
    at Strategy.strategy.fail (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\middleware\authenticate.js:297:9)
    at verified (C:\Users\Sys\Desktop\letsConnect\node_modules\passport-local\lib\strategy.js:82:30)
    at C:\Users\Sys\Desktop\letsConnect\routes\users.js:69:18
    at C:\Users\Sys\Desktop\letsConnect\node_modules\mongoose\lib\model.js:3953:16
    at Immediate.<anonymous> (C:\Users\Sys\Desktop\letsConnect\node_modules\mongoose\lib\query.js:1516:14)
    at Immediate._onImmediate (C:\Users\Sys\Desktop\letsConnect\node_modules\mquery\lib\utils.js:119:16)
    at runCallback (timers.js:789:20)
    at tryOnImmediate (timers.js:751:5)
    at processImmediate [as _immediateCallback] (timers.js:722:5)
query username:ajay
Error: Failed to serialize user into session
    at pass (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\authenticator.js:281:19)
    at serialized (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\authenticator.js:286:7)
    at C:\Users\Sys\Desktop\letsConnect\routes\users.js:85:3
    at pass (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\authenticator.js:294:9)
    at Authenticator.serializeUser (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\authenticator.js:299:5)
    at SessionManager.logIn (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\sessionmanager.js:14:8)
    at IncomingMessage.req.login.req.logIn (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\http\request.js:50:33)
    at C:\Users\Sys\Desktop\letsConnect\routes\users.js:105:9
    at allFailed (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\middleware\authenticate.js:107:18)
    at attempt (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\middleware\authenticate.js:180:28)
    at Strategy.strategy.fail (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\middleware\authenticate.js:297:9)
    at verified (C:\Users\Sys\Desktop\letsConnect\node_modules\passport-local\lib\strategy.js:82:30)
    at C:\Users\Sys\Desktop\letsConnect\routes\users.js:76:23
    at C:\Users\Sys\Desktop\letsConnect\models\user.js:83:3
    at C:\Users\Sys\Desktop\letsConnect\node_modules\bcryptjs\dist\bcrypt.js:297:21
    at C:\Users\Sys\Desktop\letsConnect\node_modules\bcryptjs\dist\bcrypt.js:1353:21
    at Immediate.next [as _onImmediate] (C:\Users\Sys\Desktop\letsConnect\node_modules\bcryptjs\dist\bcrypt.js:1233:21)
    at runCallback (timers.js:789:20)
    at tryOnImmediate (timers.js:751:5)
    at processImmediate [as _immediateCallback] (timers.js:722:5)
query username:ajay
Error: Failed to serialize user into session
    at pass (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\authenticator.js:281:19)
    at serialized (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\authenticator.js:286:7)
    at C:\Users\Sys\Desktop\letsConnect\routes\users.js:85:3
    at pass (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\authenticator.js:294:9)
    at Authenticator.serializeUser (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\authenticator.js:299:5)
    at SessionManager.logIn (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\sessionmanager.js:14:8)
    at IncomingMessage.req.login.req.logIn (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\http\request.js:50:33)
    at C:\Users\Sys\Desktop\letsConnect\routes\users.js:105:9
    at allFailed (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\middleware\authenticate.js:107:18)
    at attempt (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\middleware\authenticate.js:180:28)
    at Strategy.strategy.fail (C:\Users\Sys\Desktop\letsConnect\node_modules\passport\lib\middleware\authenticate.js:297:9)
    at verified (C:\Users\Sys\Desktop\letsConnect\node_modules\passport-local\lib\strategy.js:82:30)
    at C:\Users\Sys\Desktop\letsConnect\routes\users.js:76:23
    at C:\Users\Sys\Desktop\letsConnect\models\user.js:83:3
    at C:\Users\Sys\Desktop\letsConnect\node_modules\bcryptjs\dist\bcrypt.js:297:21
    at C:\Users\Sys\Desktop\letsConnect\node_modules\bcryptjs\dist\bcrypt.js:1353:21
    at Immediate.next [as _onImmediate] (C:\Users\Sys\Desktop\letsConnect\node_modules\bcryptjs\dist\bcrypt.js:1233:21)
    at runCallback (timers.js:789:20)
    at tryOnImmediate (timers.js:751:5)
    at processImmediate [as _immediateCallback] (timers.js:722:5)
events.js:183
      throw er; // Unhandled 'error' event
      ^

Error: write after end
    at writeAfterEnd (_stream_writable.js:236:12)
    at Socket.Writable.write (_stream_writable.js:287:5)
    at Socket.write (net.js:704:40)
    at Connection.write (C:\Users\Sys\Desktop\letsConnect\node_modules\mongoose\node_modules\mongodb-core\lib\connection\connection.js:733:57)
    at C:\Users\Sys\Desktop\letsConnect\node_modules\mongoose\node_modules\mongodb-core\lib\connection\pool.js:1567:44
    at waitForAuth (C:\Users\Sys\Desktop\letsConnect\node_modules\mongoose\node_modules\mongodb-core\lib\connection\pool.js:1421:40)
    at C:\Users\Sys\Desktop\letsConnect\node_modules\mongoose\node_modules\mongodb-core\lib\connection\pool.js:1429:5
    at C:\Users\Sys\Desktop\letsConnect\node_modules\mongoose\node_modules\mongodb-core\lib\connection\pool.js:1282:23
    at _combinedTickCallback (internal/process/next_tick.js:131:7)
    at process._tickCallback (internal/process/next_tick.js:180:9)

C:\Users\Sys\Desktop\letsConnect>